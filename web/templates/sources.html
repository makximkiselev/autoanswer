<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Telegram –∏—Å—Ç–æ—á–Ω–∏–∫–∏</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, select, button { margin: 5px; padding: 5px; }
    table { border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
  </style>
</head>
<body>
  <h1>–°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤</h1>

  {% if status == 'ok' %}
    <p style="color: green;">‚úÖ –ò—Å—Ç–æ—á–Ω–∏–∫ —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω!</p>
  {% elif status == 'exists' %}
    <p style="color: orange;">‚ö†Ô∏è –¢–∞–∫–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.</p>
  {% elif status == 'fail' %}
    <p style="color: red;">‚ùå –û—à–∏–±–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞.</p>
  {% elif status == 'error' %}
    <p style="color: red;">üî• –°–∏—Å—Ç–µ–º–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞.</p>
  {% endif %}

  <!-- ‚úÖ –û–±–Ω–æ–≤–ª—ë–Ω–Ω–∞—è —Ñ–æ—Ä–º–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ñ–ª–∞–≥–∞ monitored -->
  <form action="/sources/form" method="post">
    <input type="text" name="name" placeholder="–ò–º—è –∫–∞–Ω–∞–ª–∞ –∏–ª–∏ —á–∞—Ç–∞" required>
    <select name="type">
      <option value="channel">–ö–∞–Ω–∞–ª</option>
      <option value="chat">–ß–∞—Ç</option>
    </select>
    <label><input type="checkbox" name="monitored" checked> –°–ª—É—à–∞—Ç—å</label>
    <button type="submit">–î–æ–±–∞–≤–∏—Ç—å</button>
  </form>

  <h2>üì¢ –ö–∞–Ω–∞–ª—ã</h2>
  <ul>
    {% for id, name, type, monitored in sources %}
      {% if type == 'channel' %}
        <li><b>{{ name }}</b> (ID: {{ id }}) ‚Äî {{ 'üü¢ —Å–ª—É—à–∞–µ—Ç—Å—è' if monitored else 'üî¥ –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è' }}
          <form style="display:inline;" method="post" action="/sources/{{ id }}/toggle">
            <button type="submit">{{ '–í—ã–∫–ª—é—á–∏—Ç—å' if monitored else '–í–∫–ª—é—á–∏—Ç—å' }}</button>
          </form>
        </li>
      {% endif %}
    {% endfor %}
  </ul>

  <h2>üí¨ –ß–∞—Ç—ã</h2>
  <ul>
    {% for id, name, type, monitored in sources %}
      {% if type == 'chat' %}
        <li><b>{{ name }}</b> (ID: {{ id }}) ‚Äî {{ 'üü¢ —Å–ª—É—à–∞–µ—Ç—Å—è' if monitored else 'üî¥ –Ω–µ —Å–ª—É—à–∞–µ—Ç—Å—è' }}
          <form style="display:inline;" method="post" action="/sources/{{ id }}/toggle">
            <button type="submit">{{ '–í—ã–∫–ª—é—á–∏—Ç—å' if monitored else '–í–∫–ª—é—á–∏—Ç—å' }}</button>
          </form>
        </li>
      {% endif %}
    {% endfor %}
  </ul>

  <hr>

  <table id="sourceTable">
    <thead>
      <tr><th>ID</th><th>–ò–º—è</th><th>–¢–∏–ø</th><th>–°–ª—É—à–∞—Ç—å</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr>
    </thead>
    <tbody>
      {% for id, name, type, monitored in sources %}
        <tr>
          <td>{{ id }}</td>
          <td>{{ name }}</td>
          <td>{{ type }}</td>
          <td>{{ '‚úÖ' if monitored else '‚ùå' }}</td>
          <td>
            <form style="display:inline;" method="post" action="/sources/{{ id }}/toggle">
              <button type="submit">{{ '–í—ã–∫–ª—é—á–∏—Ç—å' if monitored else '–í–∫–ª—é—á–∏—Ç—å' }}</button>
            </form>
            <form style="display:inline;" action="/sources/{{ id }}" method="post" onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å?');">
              <input type="hidden" name="_method" value="delete">
              <button type="submit">–£–¥–∞–ª–∏—Ç—å</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>
